\section{Related Work and Discussion}
\label{sec:RW}

Many authors contributed with interesting overviews for the many aspects of \IOT: in \cite{J:AlFuqaha-etAl:2014,xu-14a} reviewed the applications, protocols and technologies used in the various \IOT layers, while \cite{singh-14,gubbi-13} focused on architectural aspects; the security aspects are reviewed in \cite{tan-10,xu-14b}. Most of these contributions identify a number of challenges crossing the application domain of a \DSL for \IOT, from which we already identified the most challenging from our viewpoint.

Capturing variations of a domain with explicit constructs that are close to the domain concepts resides at the essence of \DSLS. In that regard, many \DSLS were already proposed for various purposes in the \IOT stack. \textsc{Chariot} \cite{Pradhan-etAl:2015} addresses Cyber-Physical Systems by providing a component model that clearly separates between communication and computation, while ensuring resilience features in highly reconfigurable systems. In \cite{Brandzaeg-Mohagheghi-Mosser:2012} is presented a \DSL aimed at facilitating the deployment of applications, based on a component model of the environment that can be helpful to locate the architecture nodes where business logics can be leveraged. \textsc{Alph} \cite{Munnelly-Clarke:2008} is a \DSL for ubiquitous healthcare that focuses on three concerns: mobility, by helping users to manage frequent devices disconnections; context-awareness for adapting application behaviour to environment changes; and infrastructure, for managing the heterogeneity of communication protocols. Midgar \cite{J:Garcia-etAl:2014} offers a visual interface for helping end-users to control interconnected devices and to generate the glue application to make these devices interoperate. In \cite{Salihbegovic-Eterovic-Kaljic-Ribic:2015}, the authors present a visual \DSL for capturing the features and intercommunications of devices distributed in various application domains spanning from smart homes to patient monitoring. These contributions target different application domains at different abstraction levels, but possess all the key features we identified in Section \ref{sec:Context-Challenges} in a more or less explicit way. Since our \DSL targets end-users with no prior knowledge in programming, we contrast with these contributions by having a textual representation for now, but by offering a more intuitive, declarative style for expressing the system's dynamics through rules.

ThingML \cite{Harrand-Fleurey-Morin-Husa:2016} is the closest contribution to our \DSL: it uses a similar device description with messages and communication ports attached to devices, but describes the dynamics of devices and systems through state machines, which appear to be more technical for end-users. However, the conceptual drawbacks are similar in both paradigms: state machines need to be deterministic on their transitions, while rules have to avoid multiple concurrent firing to avoid executing several rules at the same time. All the previous contributions take advantage of \MDE technology and tools. More general \MDE framework like GeMoC \cite{Bousse-Degueule-Vojtisek-etAl:2016} or ThingML allow specialising the description of interconnected devices, for example for describing Arduino systems specifically in ArduinoML \cite{Mosser-Collet-BlayFornarino:2014}.